{"version":3,"sources":["components/Header.js","auth/index.js","api/index.js","components/UserPosts.js","components/UserTodos.js","index.js"],"names":["Header","currentUser","setCurrentUser","userList","useState","selectedUser","setSelectedUser","useEffect","className","onSubmit","event","preventDefault","to","activeClassName","onClick","localStorage","removeItem","username","onChange","id","target","value","user","find","map","setItem","JSON","stringify","BASE","a","axios","get","data","getPostsByUser","userId","UserPosts","userPosts","then","posts","setUserPosts","catch","error","title","body","UserTodos","userTodos","completed","style","textDecoration","App","setUserList","parse","getItem","setUserTodos","getUsers","users","getTodosByUser","todos","path","exact","padding","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d9c86af0.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { NavLink } from \"react-router-dom\";\n\n// NEW\nimport { storeCurrentUser, clearCurrentUser } from \"../auth\";\n\nimport \"./Header.css\";\n\nconst Header = ({ currentUser, setCurrentUser, userList }) => {\n  const [selectedUser, setSelectedUser] = useState();\n\n  useEffect(() => {\n    setSelectedUser(userList[0]);\n  }, [userList]);\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n  };\n\n  const handleSelectChange = (event) => {\n    const id = event.target.value;\n    const user = userList.find((user) => user.id == id);\n    setSelectedUser(user);\n  };\n\n  const handleUserLogin = (event) => {\n    storeCurrentUser(selectedUser); // NEW\n    setCurrentUser(selectedUser);\n  };\n\n  const handleUserLogout = (event) => {\n    setSelectedUser(userList[0]);\n    clearCurrentUser(); // NEW\n    setCurrentUser(null);\n  };\n\n  return (\n    <header>\n      <h1>Welcome to UserHub</h1>\n      <form className=\"user-select\" onSubmit={handleSubmit}>\n        {currentUser ? (\n          <>\n            <NavLink to=\"/posts\" activeClassName=\"current\">\n              POSTS\n            </NavLink>\n            <NavLink to=\"/todos\" activeClassName=\"current\">\n              TODOS\n            </NavLink>\n            <button onClick={handleUserLogout}>\n              LOG OUT, {currentUser.username}\n            </button>\n          </>\n        ) : (\n          <>\n            <select onChange={handleSelectChange}>\n              {userList.map((user) => (\n                <option key={user.id} value={user.id}>\n                  {user.username}\n                </option>\n              ))}\n            </select>\n            <button onClick={handleUserLogin}>LOG IN</button>\n          </>\n        )}\n      </form>\n    </header>\n  );\n};\n\nexport default Header;\n","export function storeCurrentUser(user) {\n  localStorage.setItem(\"currentUser\", JSON.stringify(user));\n}\n\nexport function getCurrentUser() {\n  const user = JSON.parse(localStorage.getItem(\"currentUser\"));\n  return user;\n}\n\nexport function clearCurrentUser() {\n  localStorage.removeItem(\"currentUser\");\n}\n","import axios from \"axios\";\n\nconst BASE = \"https://jsonplace-univclone.herokuapp.com\";\n\nexport async function getUsers() {\n  try {\n    const { data } = await axios.get(`${BASE}/users`);\n    return data;\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport async function getPostsByUser(userId) {\n  try {\n    const { data } = await axios.get(`${BASE}/users/${userId}/posts`);\n    return data;\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport async function getTodosByUser(userId) {\n  try {\n    const { data } = await axios.get(`${BASE}/users/${userId}/todos`);\n    return data;\n  } catch (error) {\n    throw error;\n  }\n}\n","// src/components/UserPosts.js\n\nimport React, { useEffect } from \"react\";\nimport { getPostsByUser } from \"../api\";\nimport \"./UserPosts.css\";\n\nconst UserPosts = ({ currentUser, userPosts }) => {\n  useEffect(() => {\n    if (!currentUser) {\n      setUserPosts([]);\n      return;\n    }\n    getPostsByUser(currentUser.id)\n      .then((posts) => {\n        setUserPosts(posts);\n      })\n      .catch((error) => {\n        // something something errors\n      });\n  }, [currentUser]);\n\n  return (\n    <div className=\"user-posts\">\n      <h2>Posts By {currentUser.username}</h2>\n      {userPosts.map(({ id, title, body }) => (\n        <div key={id} className=\"post\">\n          <h3>{title}</h3>\n          <p>{body}</p>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default UserPosts;\n","// src/components/UserTodos.js\n\nimport React from \"react\";\n\nimport \"./UserTodos.css\";\n\nconst UserTodos = ({ currentUser, userTodos }) => {\n  return (\n    <div className=\"user-todos\">\n      <h2>Todos By {currentUser.username}</h2>\n      {userTodos.map(({ id, title, completed }) => (\n        <div key={id} className=\"todo\">\n          <h3\n            style={{\n              textDecoration: completed ? \"line-through\" : \"none\",\n            }}\n          >\n            {title}\n          </h3>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default UserTodos;\n","// src/index.js\n\nimport React, { useState, useEffect } from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport {\n  BrowserRouter as Router,\n  Route,\n  Switch,\n  Redirect,\n} from \"react-router-dom\";\n\nimport { Header, UserPosts, UserTodos } from \"./components\";\n\nimport { getUsers, getPostsByUser, getTodosByUser } from \"./api\";\n\n// NEW\nimport { getCurrentUser } from \"./auth\";\n\nconst App = () => {\n  const [userList, setUserList] = useState([]);\n\n  // MODIFIED\n  const [currentUser, setCurrentUser] = useState(getCurrentUser());\n\n  const [userPosts, setUserPosts] = useState([]);\n  const [userTodos, setUserTodos] = useState([]);\n\n  useEffect(() => {\n    getUsers()\n      .then((users) => {\n        setUserList(users);\n      })\n      .catch((error) => {\n        // something something errors\n      });\n  }, []);\n\n  useEffect(() => {\n    if (!currentUser) {\n      setUserPosts([]);\n      setUserTodos([]);\n      return;\n    }\n\n    getPostsByUser(currentUser.id)\n      .then((posts) => {\n        setUserPosts(posts);\n      })\n      .catch((error) => {\n        // something something errors\n      });\n\n    getTodosByUser(currentUser.id)\n      .then((todos) => {\n        setUserTodos(todos);\n      })\n      .catch((error) => {\n        // something something errors\n      });\n  }, [currentUser]);\n\n  return (\n    <Router>\n      <div id=\"App\">\n        <Header\n          userList={userList}\n          currentUser={currentUser}\n          setCurrentUser={setCurrentUser}\n        />\n        {currentUser ? (\n          <>\n            <Switch>\n              <Route path=\"/posts\">\n                <UserPosts userPosts={userPosts} currentUser={currentUser} />\n              </Route>\n              <Route path=\"/todos\">\n                <UserTodos userTodos={userTodos} currentUser={currentUser} />\n              </Route>\n              <Route exact path=\"/\">\n                <h2\n                  style={{\n                    padding: \".5em\",\n                  }}\n                >\n                  Welcome, {currentUser.username}!\n                </h2>\n              </Route>\n              <Redirect to=\"/\" />\n            </Switch>\n          </>\n        ) : (\n          <>\n            <Switch>\n              <Route exact path=\"/\">\n                <h2\n                  style={{\n                    padding: \".5em\",\n                  }}\n                >\n                  Please log in, above.\n                </h2>\n              </Route>\n              <Redirect to=\"/\" />\n            </Switch>\n          </>\n        )}\n      </div>\n    </Router>\n  );\n};\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}